{"ast":null,"code":"import _classCallCheck from \"D:\\\\Git\\\\ANGULAR\\\\B2C\\\\POC\\\\2-call-api-b2c\\\\SPA\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"D:\\\\Git\\\\ANGULAR\\\\B2C\\\\POC\\\\2-call-api-b2c\\\\SPA\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { InjectionToken, APP_INITIALIZER } from '@angular/core';\nimport { PublicClientApplication, LogLevel, InteractionType } from '@azure/msal-browser';\nimport { MsalGuard, MsalInterceptor, MsalBroadcastService, MsalModule, MsalService, MSAL_GUARD_CONFIG, MSAL_INSTANCE, MSAL_INTERCEPTOR_CONFIG } from '@azure/msal-angular';\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { MsalConfService } from '../msal-conf-service';\nimport * as i0 from \"@angular/core\";\nvar AUTH_CONFIG_URL_TOKEN = new InjectionToken('AUTH_CONFIG_URL');\nexport function initializerFactory(env, configUrl) {\n  var promise = env.init(configUrl).then(function (value) {\n    console.log('finished getting configurations dynamically.');\n  });\n  return function () {\n    return promise;\n  };\n}\nvar isIE = window.navigator.userAgent.indexOf(\"MSIE \") > -1 || window.navigator.userAgent.indexOf(\"Trident/\") > -1; // Remove this line to use Angular Universal\n\nexport function loggerCallback(logLevel, message) {\n  console.log(message);\n}\nexport function MSALInstanceFactory(config) {\n  return new PublicClientApplication({\n    auth: config.getSettings('msal').auth,\n    cache: config.getSettings('msal').cache,\n    system: {\n      loggerOptions: {\n        loggerCallback: loggerCallback,\n        logLevel: LogLevel.Info,\n        piiLoggingEnabled: false\n      }\n    }\n  });\n}\nexport function MSALInterceptorConfigFactory(config) {\n  var protectedResourceMap = new Map(config.getSettings('interceptor').protectedResourceMap);\n  return {\n    interactionType: config.getSettings('interceptor').interactionType,\n    protectedResourceMap: protectedResourceMap\n  };\n}\nexport function MSALGuardConfigFactory(config) {\n  return {\n    interactionType: InteractionType.Redirect,\n    authRequest: {\n      scopes: []\n    },\n    loginFailedRoute: '/'\n  };\n}\nexport var MsalConfigDynamicModule = /*#__PURE__*/(function () {\n  var MsalConfigDynamicModule = /*#__PURE__*/function () {\n    function MsalConfigDynamicModule() {\n      _classCallCheck(this, MsalConfigDynamicModule);\n    }\n\n    _createClass(MsalConfigDynamicModule, null, [{\n      key: \"forRoot\",\n      value: function forRoot(configFile) {\n        return {\n          ngModule: MsalConfigDynamicModule,\n          providers: [MsalConfService, {\n            provide: AUTH_CONFIG_URL_TOKEN,\n            useValue: configFile\n          }, {\n            provide: APP_INITIALIZER,\n            useFactory: initializerFactory,\n            deps: [MsalConfService, AUTH_CONFIG_URL_TOKEN],\n            multi: true\n          }, {\n            provide: MSAL_INSTANCE,\n            useFactory: MSALInstanceFactory,\n            deps: [MsalConfService]\n          }, {\n            provide: MSAL_GUARD_CONFIG,\n            useFactory: MSALGuardConfigFactory,\n            deps: [MsalConfService]\n          }, {\n            provide: MSAL_INTERCEPTOR_CONFIG,\n            useFactory: MSALInterceptorConfigFactory,\n            deps: [MsalConfService]\n          }, MsalService, MsalGuard, MsalBroadcastService, {\n            provide: HTTP_INTERCEPTORS,\n            useClass: MsalInterceptor,\n            multi: true\n          }]\n        };\n      }\n    }]);\n\n    return MsalConfigDynamicModule;\n  }();\n\n  MsalConfigDynamicModule.ɵfac = function MsalConfigDynamicModule_Factory(t) {\n    return new (t || MsalConfigDynamicModule)();\n  };\n\n  MsalConfigDynamicModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({\n    type: MsalConfigDynamicModule\n  });\n  MsalConfigDynamicModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({\n    providers: [],\n    imports: [[MsalModule]]\n  });\n  return MsalConfigDynamicModule;\n})();","map":null,"metadata":{},"sourceType":"module"}